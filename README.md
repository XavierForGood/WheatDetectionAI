# Wheat Detection AI - å°éº¦æ£€æµ‹ä¸äº§é‡è¯„ä¼°ç³»ç»Ÿ

![Project Status](https://img.shields.io/badge/status-active-green)
![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![React](https://img.shields.io/badge/React-19-blue)
![FastAPI](https://img.shields.io/badge/FastAPI-0.121-teal)

## ğŸ“– é¡¹ç›®æ¦‚è¿°

**Wheat Detection AI** æ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å°éº¦éº¦ç©—æ£€æµ‹ä¸äº§é‡è¯„ä¼°ç³»ç»Ÿã€‚è¯¥é¡¹ç›®ä½œä¸ºã€Šåª’ä½“è®¡ç®—åŸºç¡€ã€‹è¯¾ç¨‹çš„å¤§ä½œä¸šï¼Œæ—¨åœ¨åˆ©ç”¨è®¡ç®—æœºè§†è§‰æŠ€æœ¯è§£å†³å†œä¸šé¢†åŸŸçš„å®é™…é—®é¢˜ã€‚

ç³»ç»Ÿé€šè¿‡å…ˆè¿›çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼ˆYOLO11x/ONNXï¼‰å¯¹æ‹æ‘„çš„å°éº¦å›¾åƒè¿›è¡Œåˆ†æï¼Œè‡ªåŠ¨è¯†åˆ«éº¦ç©—æ•°é‡ï¼Œå¹¶ç»“åˆå†œä¸šå‚æ•°ï¼ˆå¦‚å•ç©—ç²’é‡ã€ç§æ¤å¯†åº¦ï¼‰ä¼°ç®—äº©äº§é‡ã€‚åŒæ—¶ï¼Œç³»ç»Ÿè¿˜æä¾›åŸºäºè§†è§‰ç½®ä¿¡åº¦çš„ä½œç‰©å¥åº·æŒ‡æ•°è¯„ä¼°ã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

*   **ç²¾å‡†æ£€æµ‹**: ä½¿ç”¨ YOLO ç³»åˆ—æ¨¡å‹ï¼ˆONNX Runtime åŠ é€Ÿï¼‰å¿«é€Ÿè¯†åˆ«å›¾åƒä¸­çš„éº¦ç©—ã€‚
*   **äº§é‡ä¼°ç®—**: åŸºäºè¯†åˆ«æ•°é‡ã€é¢„è®¾æ‹æ‘„é¢ç§¯ï¼ˆ0.6mÂ²ï¼‰å’Œæ ‡å‡†äº©äº§å…¬å¼ï¼Œè‡ªåŠ¨è®¡ç®—é¢„ä¼°äº©äº§é‡ã€‚
*   **å¥åº·è¯„ä¼°**: ç»¼åˆæ£€æµ‹ç½®ä¿¡åº¦å’Œçº¹ç†ç‰¹å¾ï¼Œç”Ÿæˆä½œç‰©å¥åº·æŒ‡æ•°ã€‚
*   **æ•°æ®å¯è§†åŒ–**: æä¾›ç›´è§‚çš„æ£€æµ‹ç»“æœæ ‡æ³¨ã€ç½®ä¿¡åº¦åˆ†å¸ƒåŠè¯¦ç»†çš„è®¡ç®—æ­¥éª¤å±•ç¤ºã€‚
*   **æ¡Œé¢çº§ä½“éªŒ**: é›†æˆ `pywebview`ï¼Œæä¾›ç±»ä¼¼åŸç”Ÿåº”ç”¨çš„æ¡Œé¢ç«¯æ“ä½œä½“éªŒã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### Backend (åç«¯)
*   **Python**: æ ¸å¿ƒç¼–ç¨‹è¯­è¨€
*   **FastAPI**: é«˜æ€§èƒ½ Web æ¡†æ¶ï¼Œæä¾› RESTful API
*   **ONNX Runtime**: é«˜æ•ˆçš„æ¨¡å‹æ¨ç†å¼•æ“
*   **OpenCV & Pillow**: å›¾åƒå¤„ç†
*   **Numpy**: æ•°å€¼è®¡ç®—

### Frontend (å‰ç«¯)
*   **React 19**: æ„å»ºç”¨æˆ·ç•Œé¢çš„ UI åº“
*   **Vite**: æé€Ÿå‰ç«¯æ„å»ºå·¥å…·
*   **Tailwind CSS**: å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
*   **Recharts**: æ•°æ®å¯è§†åŒ–å›¾è¡¨
*   **Framer Motion**: åŠ¨ç”»æ•ˆæœ

### Desktop & Build (æ¡Œé¢ä¸æ„å»º)
*   **pywebview**: å°† Web åº”ç”¨å°è£…ä¸ºæ¡Œé¢çª—å£
*   **PyInstaller**: æ‰“åŒ… Python åº”ç”¨ä¸ºç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
Project/
â”œâ”€â”€ backend/                # åç«¯æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ models/             # å­˜æ”¾ ONNX æ¨¡å‹æ–‡ä»¶ (best.onnx)
â”‚   â”œâ”€â”€ inference.py        # æ¨¡å‹æ¨ç†é€»è¾‘ (é¢„å¤„ç†ã€æ¨ç†ã€åå¤„ç†)
â”‚   â”œâ”€â”€ main.py             # FastAPI åº”ç”¨å…¥å£åŠ API å®šä¹‰
â”‚   â””â”€â”€ static/             # é™æ€èµ„æºç›®å½•
â”œâ”€â”€ frontend/               # å‰ç«¯ React é¡¹ç›®
â”‚   â”œâ”€â”€ src/                # æºä»£ç 
â”‚   â”œâ”€â”€ dist/               # æ„å»ºäº§ç‰© (ç¼–è¯‘åç”Ÿæˆ)
â”‚   â””â”€â”€ ...                 # é…ç½®æ–‡ä»¶ (package.json, vite.config.js ç­‰)
â”œâ”€â”€ pic/                    # ç¤ºä¾‹å›¾ç‰‡
â”œâ”€â”€ run.py                  # æ¡Œé¢åº”ç”¨å¯åŠ¨è„šæœ¬ (Entry Point)
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–åˆ—è¡¨
â””â”€â”€ build.spec              # PyInstaller æ‰“åŒ…é…ç½®
```

---

## ğŸš€ å®‰è£…ä¸è¿è¡ŒæŒ‡å—

### ç¯å¢ƒè¦æ±‚
*   **Node.js** (ç”¨äºå‰ç«¯æ„å»ºï¼Œå»ºè®® v18+)
*   **Python 3.8+**

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <your-repository-url>
cd Project
```

### 2. åç«¯ç¯å¢ƒé…ç½®
å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/macOS:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. å‰ç«¯ç¯å¢ƒé…ç½®ä¸æ„å»º
å¦‚æœä½ éœ€è¦ä¿®æ”¹å‰ç«¯ä»£ç æˆ–é¦–æ¬¡è¿è¡Œï¼Œéœ€è¦æ„å»ºå‰ç«¯èµ„æºï¼š

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç¯å¢ƒèµ„æº (ç”Ÿæˆçš„ dist ç›®å½•å°†è¢«åç«¯è°ƒç”¨)
npm run build

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

### 4. å¯åŠ¨åº”ç”¨

**æ–¹å¼ A: æ¡Œé¢åº”ç”¨æ¨¡å¼ (æ¨è)**
ç›´æ¥è¿è¡Œæ ¹ç›®å½•ä¸‹çš„ `run.py`ï¼Œè¿™å°†å¯åŠ¨åç«¯æœåŠ¡å¹¶æ‰“å¼€ä¸€ä¸ªç‹¬ç«‹çš„æ¡Œé¢çª—å£ã€‚
```bash
python run.py
```

**æ–¹å¼ B: å¼€å‘è€…æ¨¡å¼ (å‰åç«¯åˆ†ç¦»)**
1.  å¯åŠ¨åç«¯ API æœåŠ¡ï¼š
    ```bash
    uvicorn backend.main:app --reload --port 8000
    ```
2.  åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š
    ```bash
    cd frontend
    npm run dev
    ```
    è®¿é—® `http://localhost:5173` è¿›è¡Œè°ƒè¯•ã€‚

---

## ğŸ”Œ API æ–‡æ¡£

åç«¯æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://127.0.0.1:8000`ã€‚

### 1. è·å–ç³»ç»ŸçŠ¶æ€
*   **Endpoint**: `GET /api/status`
*   **æè¿°**: æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€åŠæ¨¡å‹ä¿¡æ¯ã€‚
*   **å“åº”ç¤ºä¾‹**:
    ```json
    {
      "status": "running",
      "model": "YOLO11x",
      "input_shape": [640, 640]
    }
    ```

### 2. å›¾åƒæ£€æµ‹
*   **Endpoint**: `POST /api/detect`
*   **Content-Type**: `multipart/form-data`
*   **å‚æ•°**:
    *   `file`: å›¾åƒæ–‡ä»¶ (Binary)
*   **æè¿°**: ä¸Šä¼ å›¾åƒè¿›è¡Œéº¦ç©—æ£€æµ‹ã€‚
*   **å“åº”ç¤ºä¾‹**:
    ```json
    {
      "filename": "example.jpg",
      "count": 42,
      "estimated_yield": 512.5,
      "health_index": 92.3,
      "inference_time": 150.2,
      "calculation_steps": {
        "yield": {
            "formula": "(count Ã— é¢ç§¯ç³»æ•°) Ã— å•ç©—ç²’é‡ / 1000",
            "result": 512.5
        },
        "health": { ... }
      },
      "detections": [
        {
          "box": [100, 200, 150, 250],
          "score": 0.85,
          "class_id": 0,
          "label": "Wheat"
        },
        ...
      ]
    }
    ```

---

## ğŸ“¦ æ‰“åŒ…æŒ‡å— (Windows)

æœ¬é¡¹ç›®åŒ…å« `build.spec` æ–‡ä»¶ï¼Œæ”¯æŒä½¿ç”¨ PyInstaller æ‰“åŒ…ä¸ºç‹¬ç«‹ `.exe` æ–‡ä»¶ã€‚

1.  ç¡®ä¿å‰ç«¯å·²æ„å»º (`npm run build`)ã€‚
2.  è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼š
    ```bash
    pyinstaller build.spec
    ```
3.  æ‰“åŒ…å®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äº `dist/` ç›®å½•ä¸‹ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1.  Fork æœ¬ä»“åº“
2.  åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3.  æäº¤ä½ çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4.  æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5.  å¼€å¯ä¸€ä¸ª Pull Request

